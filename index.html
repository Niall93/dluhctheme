<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="This package contains a generic theme function for any graph to get into a consistent DLUHC style.
    The package also contains full functions which create graphs based on pre-determined inputs">
<title>Creates a Consistent ggplot Theme for DLUHC Graphs  • dluhctheme</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Creates a Consistent ggplot Theme for DLUHC Graphs ">
<meta property="og:description" content="This package contains a generic theme function for any graph to get into a consistent DLUHC style.
    The package also contains full functions which create graphs based on pre-determined inputs">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="index.html">dluhctheme</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="reference/index.html">Reference</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav"></ul>
</div>

    
  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="dluhc-cookbook-for-r-graphics">DLUHC cookbook for R graphics<a class="anchor" aria-label="anchor" href="#dluhc-cookbook-for-r-graphics"></a>
</h1></div>
<p>Last updated: 2023-02-02</p>
<ul>
<li><a href="#credit-to-bbc-data-team">Credit to BBC data team</a></li>
<li>
<a href="#how-to-create-dluhc-style-graphics">How to create DLUHC style graphics</a>
<ul>
<li><a href="#load-all-the-libraries-you-need">Load all the libraries you need</a></li>
<li><a href="#install-the-dluhctheme-package">Install the dluhctheme package</a></li>
<li><a href="#how-does-the-dluctheme-package-work">How does the dluctheme package work?</a></li>
<li><a href="#style-function">Style function</a></li>
<li><a href="#save-out-your-finished-chart">Save out your finished chart</a></li>
</ul>
</li>
<li>
<a href="#make-a-line-chart">Make a line chart</a>
<ul>
<li><a href="#single-line-chart">Single line chart</a></li>
<li><a href="#dluhctheme-function">dluhctheme function</a></li>
<li><a href="#multiple-line-chart">Multiple line chart</a></li>
<li><a href="#dluhctheme-function-1">dluhctheme function</a></li>
<li><a href="#using-facets">Using facets</a></li>
<li><a href="#dluhctheme-function-2">dluhctheme function</a></li>
<li><a href="#creating-a-forecast-time-series">Creating a forecast time series</a></li>
<li><a href="#dluhctheme-function-3">dluhctheme function</a></li>
</ul>
</li>
<li>
<a href="#make-a-bar-chart">Make a bar chart</a>
<ul>
<li><a href="#stacked-bar-chart">Stacked bar chart</a></li>
<li><a href="#grouped-bar-chart">Grouped bar chart</a></li>
<li><a href="#faceted-bar-charts">Faceted bar charts</a></li>
</ul>
</li>
<li><a href="#static-la-maps">Static LA Maps</a></li>
</ul>
<!-- README.md is generated from README.Rmd. Please edit that file --><div class="section level2">
<h2 id="credit-to-bbc-data-team">Credit to BBC data team<a class="anchor" aria-label="anchor" href="#credit-to-bbc-data-team"></a>
</h2>
<p>This cookbook has been copied from the much better BBC rcookbook, and reapplied to work for creating graphics in a DLUHC style. Credit must go to the BBC data team for their fantastic product which the team at DLUHC have essentially copied for our own use.</p>
</div>
<div class="section level2">
<h2 id="how-to-create-dluhc-style-graphics">How to create DLUHC style graphics<a class="anchor" aria-label="anchor" href="#how-to-create-dluhc-style-graphics"></a>
</h2>
<p>We have developed an R package and an R cookbook to make the process of creating publication-ready graphics in our in-house style using R’s ggplot2 library a more reproducible process, as well as making it easier for people new to R to create graphics.</p>
<p>The cookbook below should hopefully help anyone who wants to make graphs or maps quickly in a consistent DLUHC style</p>
<p>We’ll get to how you can put together the various elements of these graphics, but <strong>let’s get the admin out of the way first…</strong></p>
<div class="section level3">
<h3 id="load-all-the-libraries-you-need">Load all the libraries you need<a class="anchor" aria-label="anchor" href="#load-all-the-libraries-you-need"></a>
</h3>
<p>A few of the steps in this cookbook - and to create charts in R in general - require certain packages to be installed and loaded. So that you do not have to install and load them one by one, you can use the <code>p_load</code> function in the <code>pacman</code> package to load them all at once with the following code.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#This line of code installs the pacman page if you do not have it installed - if you do, it simply loads the package</span></span>
<span><span class="kw">if</span><span class="op">(</span><span class="op">!</span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">require</a></span><span class="op">(</span><span class="va"><a href="https://github.com/trinker/pacman" class="external-link">pacman</a></span><span class="op">)</span><span class="op">)</span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"pacman"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">pacman</span><span class="fu">::</span><span class="fu">p_load</span><span class="op">(</span><span class="st">'dplyr'</span>, <span class="st">'tidyr'</span>, <span class="st">'gapminder'</span>,</span>
<span>               <span class="st">'ggplot2'</span>,  <span class="st">'ggalt'</span>, <span class="st">'cowplot'</span>, <span class="st">'sf'</span>,</span>
<span>               <span class="st">'forcats'</span>, <span class="st">'R.utils'</span>, <span class="st">'png'</span>, </span>
<span>               <span class="st">'grid'</span>, <span class="st">'ggpubr'</span>, <span class="st">'scales'</span>,</span>
<span>               <span class="st">'dluhctheme'</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="install-the-dluhctheme-package">Install the dluhctheme package<a class="anchor" aria-label="anchor" href="#install-the-dluhctheme-package"></a>
</h3>
<p><code>dluhctheme</code> is not on CRAN, so you will have to install it directly from Github using <code>devtools</code>.</p>
<p>If you do not have the <code>devtools</code> package installed, you will have to run the first line in the code below as well.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># install.packages('devtools')</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">'communitiesuk/dluhctheme'</span><span class="op">)</span></span></code></pre></div>
<p>For more info on <code>dluhctheme</code> check out the <a href="https://github.com/communitiesuk/dluhctheme" class="external-link">package’s Github repo</a>, but most of the details about how to use the package and its functions are detailed below.</p>
<p>When you have downloaded the package and successfully installed it you are good to go and create charts.</p>
</div>
<div class="section level3">
<h3 id="how-does-the-dluctheme-package-work">How does the dluctheme package work?<a class="anchor" aria-label="anchor" href="#how-does-the-dluctheme-package-work"></a>
</h3>
<p>The package has two types of functions; Generic functions: <code><a href="reference/dluhc_style.html">dluhc_style()</a></code> and <code><a href="reference/finalise_plot.html">finalise_plot()</a></code> are functions which are designed to be generic themes which can be added to any ggplot2 object. They only edit the axes and the gridlines and define the text style, they do not set the colour of lines or fill on the graphs. Specific functions: The other functions are used as a quick tool for instantly creating a particular type of formatted graph based on a set shape of data inputted. These are less adaptable, but allow a user to create a graph in one line of code: <code><a href="reference/one_line_timeseries.html">one_line_timeseries()</a></code>, <code>two_line_timeseries()</code>, <code><a href="reference/facet_highlight_timeseries.html">facet_highlight_timeseries()</a></code>, <code><a href="reference/LA_map.html">LA_map()</a></code>, <code>facet_barchart()</code>, <code><a href="reference/forecast_timeseries.html">forecast_timeseries()</a></code> These functions allow you to create a data visualisation in a set theme instantly but are more fixed in some of their formatting. Examples of these functions can all be found later in this document</p>
</div>
<div class="section level3">
<h3 id="style-function">Style function<a class="anchor" aria-label="anchor" href="#style-function"></a>
</h3>
<p><code><a href="reference/dluhc_style.html">dluhc_style()</a></code>:is added to the ggplot ‘chain’ after you have created a plot and has one argument for text size. What it does is generally makes text size, font and colour, axis lines, axis text, margins and many other standard chart components into DLUHC style, which has been mainly copied from the BBC data team with some slight tweaks based on the best practise suggestions by the Analysis Function and ONS.</p>
<p>Note that colours for lines in the case of a line chart or bars for a bar chart, do not come out of the box from the <code><a href="reference/dluhc_style.html">dluhc_style()</a></code> function, but need to be explicitly set in your other standard <code>ggplot</code> chart functions.</p>
<p>The code below shows how the <code><a href="reference/dluhc_style.html">dluhc_style()</a></code> should be used within standard chart-production workflow. This is an example for a very simple line chart, using data which is contained within the <code>dluhctheme</code> package.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#Data for chart from 2021 Social Housing Sales statistical release is contained within the dluhctheme package</span></span>
<span></span>
<span><span class="fu">kable</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">Social_Housing_Sales</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">year</th>
<th align="left">type</th>
<th align="right">count</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">31/03/2008</td>
<td align="left">Right to Buy</td>
<td align="right">15362</td>
</tr>
<tr class="even">
<td align="left">31/03/2008</td>
<td align="left">Shared Ownership</td>
<td align="right">2231</td>
</tr>
<tr class="odd">
<td align="left">31/03/2009</td>
<td align="left">Right to Buy</td>
<td align="right">3882</td>
</tr>
<tr class="even">
<td align="left">31/03/2009</td>
<td align="left">Shared Ownership</td>
<td align="right">1162</td>
</tr>
<tr class="odd">
<td align="left">31/03/2010</td>
<td align="left">Right to Buy</td>
<td align="right">3144</td>
</tr>
<tr class="even">
<td align="left">31/03/2010</td>
<td align="left">Shared Ownership</td>
<td align="right">1851</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#The date column is not in the proper R format, so needs to be converted using the function below</span></span>
<span><span class="va">line_df</span> <span class="op">&lt;-</span> <span class="va">Social_Housing_Sales</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span>date <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="va">year</span>,tryFormats <span class="op">=</span> <span class="st">"%d/%m/%Y"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#Make plot</span></span>
<span><span class="va">linegraph</span> <span class="op">&lt;-</span> <span class="fu">ggplot</span><span class="op">(</span><span class="va">line_df</span>, <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">date</span>, y <span class="op">=</span> <span class="va">count</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_line</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>colour <span class="op">=</span> <span class="va">type</span><span class="op">)</span>,size <span class="op">=</span> <span class="fl">1</span><span class="op">)</span> </span></code></pre></div>
<p><img src="README_files/figure-gfm/unnamed-chunk-4-1.png"><!-- --></p>
<p>A single line can be added at the end of the script, like below, to make the graph, <em>but NOT the line colours</em> have a generic dluhc style</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">styled_line</span> <span class="op">&lt;-</span> <span class="va">linegraph</span> <span class="op">+</span></span>
<span><span class="fu"><a href="reference/dluhc_style.html">dluhc_style</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>By adding the dluhc style, the grap will change to look like this</p>
<p><img src="README_files/figure-gfm/unnamed-chunk-6-1.png"><!-- --></p>
<p>Here is what the <code><a href="reference/dluhc_style.html">dluhc_style ()</a></code> function actually does under the bonnet. It essentially modifies certain arguments in the <code>theme</code> function of <code>ggplot2</code>.</p>
<p>For example, the first argument is setting the font, size, typeface and colour of the title element of the plot.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="do">## function (size = 2) </span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="do">## {</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="do">##     ggplot2::theme(plot.title = ggplot2::element_text(size = size * </span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a><span class="do">##         11, face = "bold"), plot.subtitle = ggplot2::element_text(size = size * </span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a><span class="do">##         9), plot.caption = ggplot2::element_blank(), legend.position = "top", </span></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a><span class="do">##         legend.text.align = 0, legend.background = ggplot2::element_blank(), </span></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a><span class="do">##         legend.title = ggplot2::element_blank(), legend.key = ggplot2::element_blank(), </span></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a><span class="do">##         legend.text = ggplot2::element_text(size = size * 9, </span></span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a><span class="do">##             color = "#222222"), axis.title = ggplot2::element_blank(), </span></span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a><span class="do">##         axis.text = ggplot2::element_text(size = size * 9, color = "#222222"), </span></span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a><span class="do">##         axis.text.x = ggplot2::element_text(margin = ggplot2::margin(5, </span></span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a><span class="do">##             b = 10)), axis.ticks = ggplot2::element_line(color = "#cbcbcb"), </span></span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a><span class="do">##         axis.line = ggplot2::element_blank(), panel.grid.minor = ggplot2::element_blank(), </span></span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a><span class="do">##         panel.grid.major.y = ggplot2::element_line(color = "#cbcbcb"), </span></span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a><span class="do">##         panel.grid.major.x = ggplot2::element_blank(), panel.background = ggplot2::element_blank(), </span></span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a><span class="do">##         strip.background = ggplot2::element_rect(fill = "white"), </span></span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a><span class="do">##         strip.text = ggplot2::element_text(size = size * 11, </span></span>
<span id="cb6-18"><a href="#cb6-18" aria-hidden="true" tabindex="-1"></a><span class="do">##             hjust = 0))</span></span>
<span id="cb6-19"><a href="#cb6-19" aria-hidden="true" tabindex="-1"></a><span class="do">## }</span></span>
<span id="cb6-20"><a href="#cb6-20" aria-hidden="true" tabindex="-1"></a><span class="do">## &lt;bytecode: 0x14eaf5c0&gt;</span></span>
<span id="cb6-21"><a href="#cb6-21" aria-hidden="true" tabindex="-1"></a><span class="do">## &lt;environment: namespace:dluhctheme&gt;</span></span></code></pre></div>
<p>You can modify these settings for your chart, or add additional theme arguments, by calling the <code>theme</code> function with the arguments you want - but please note that for it to work you must call it <em>after</em> you have called the <code>dluhc_style</code> function. Otherwise <code><a href="reference/dluhc_style.html">dluhc_style()</a></code> will override it.</p>
<p>This will add some gridlines, by adding extra theme arguments to what is included in the <code><a href="reference/dluhc_style.html">dluhc_style()</a></code> function. There are many similar examples throughout the cookbook.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">theme</span><span class="op">(</span>panel.grid.major.x <span class="op">=</span> <span class="fu">element_line</span><span class="op">(</span>color<span class="op">=</span><span class="st">"#cbcbcb"</span><span class="op">)</span>, </span>
<span>        panel.grid.major.y<span class="op">=</span><span class="fu">element_blank</span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="save-out-your-finished-chart">Save out your finished chart<a class="anchor" aria-label="anchor" href="#save-out-your-finished-chart"></a>
</h3>
<p>After adding the <code><a href="reference/dluhc_style.html">dluhc_style()</a></code> to your chart there is one more step to get your plot ready for publication. <code><a href="reference/finalise_plot.html">finalise_plot()</a></code>, the second function of the <code>dluhctheme</code> package, will left-align the title, subtitle and add the footer with a source and an image in the bottom right corner of your plot. It will also save it to your specified location. The function has five arguments:</p>
<p>Here are the function arguments: <code>finalise_plot(plot_name, source, save_filepath, width_pixels = 640, height_pixels = 450, logo_image_path)</code></p>
<ul>
<li>
<code>plot_name</code>: the variable name that you have called your plot, for example for the chart example above <code>plot_name</code> would be <code>"styled_line"</code><br>
</li>
<li>
<code>source</code>: the source text that you want to appear at the bottom left corner of your plot. You will need to type the word <code>"Source:"</code> before it, so for example <code>source = "Source: ONS"</code> would be the right way to do that.</li>
<li>
<code>save_filepath</code>: the precise filepath that you want your graphic to save to, including the <code>.png</code> extension at the end. This does depend on your working directory and if you are in a specific R project. An example filepath would be: <code>Desktop/R_projects/charts/line_chart.png</code>.</li>
<li>
<code>width_pixels</code>: this is set to 640px by default, so only call this argument if you want the chart to have a different width, and specify what you want it to be.</li>
<li>
<code>height_pixels</code>: this is set to 450px by default, so only call this argument if you want the chart to have a different height, and specify what you want it to be.</li>
<li>
<code>logo_image_path</code>: this argument specifies the path for the image/logo in the bottom right corner of the plot. The default is for a placeholder PNG file with a background that matches the background colour of the plot, so do not specify the argument if you want it to appear without a logo. If you want to add your own logo, just specify the path to your PNG file. The package has been prepared with a wide and thin image in mind.</li>
</ul>
<p>Example of how the <code><a href="reference/finalise_plot.html">finalise_plot()</a></code> is used in a standard workflow. This function is called once you have created and finalised your chart data, titles and added the <code><a href="reference/dluhc_style.html">dluhc_style()</a></code> to it:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/finalise_plot.html">finalise_plot</a></span><span class="op">(</span>plot_name <span class="op">=</span> <span class="va">my_line_plot</span>,</span>
<span>              source <span class="op">=</span> <span class="st">"Source: Example source"</span>,</span>
<span>              save_filepath <span class="op">=</span> <span class="st">"filename_that_my_plot_should_be_saved_to.png"</span>,</span>
<span>              width_pixels <span class="op">=</span> <span class="fl">640</span>,</span>
<span>              height_pixels <span class="op">=</span> <span class="fl">450</span>,</span>
<span>              logo_image_path <span class="op">=</span> <span class="st">"placeholder.png"</span><span class="op">)</span></span></code></pre></div>
<p>So once you have created your plot and are relatively happy with it, you can use the <code><a href="reference/finalise_plot.html">finalise_plot()</a></code> function to make the final adjustments and save out your chart so that you can look at it outside RStudio.</p>
<p>It is important to mention that it is a good idea to do this early on because the position of the text and other elements do not render accurately in the RStudio Plots panel because this depends on the size and aspect ratio you want your plot to appear, so saving it out and opening up the files give you an accurate representation of how the graphic looks. If you are working on graphs which will go onto a gov.uk page, these need to be svg files with pixels of 640 x 640.</p>
<p>The finalise_plot() function does more than just save out your chart, it also left-aligns the title and subtitle, adds a footer with the logo on the right side and lets you input source text on the left side.</p>
<p>So how can you save out the example plot created above?</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/finalise_plot.html">finalise_plot</a></span><span class="op">(</span>plot_name <span class="op">=</span> <span class="va">styled_line</span>,</span>
<span>              source <span class="op">=</span> <span class="st">" Source: Social Housing Sales 2021, DLUHC "</span>,</span>
<span>              save_filepath <span class="op">=</span> <span class="st">"images/line_plot_finalised_test.png"</span>,</span>
<span>              width_pixels <span class="op">=</span> <span class="fl">640</span>,</span>
<span>              height_pixels <span class="op">=</span> <span class="fl">550</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="make-a-line-chart">Make a line chart<a class="anchor" aria-label="anchor" href="#make-a-line-chart"></a>
</h2>
<div class="section level3">
<h3 id="single-line-chart">Single line chart<a class="anchor" aria-label="anchor" href="#single-line-chart"></a>
</h3>
<p>The data we are going to use for these examples is the <code>Social_Housing_Sales</code> dataset contained within the dluhctheme package.</p>
<p>This dataset has two types of sale, Right to Buy and Shared Ownership, and has the year in the format “31/03/2021”, which in R is referred to as <code>"%d/%m/%Y"</code>. To see more about date formats, see the section at the end of this document.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#Prepare data, select only Right to Buy sales and clean the date column</span></span>
<span><span class="va">RTB_Sales</span> <span class="op">&lt;-</span> <span class="va">Social_Housing_Sales</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">type</span><span class="op">==</span><span class="st">"Right to Buy"</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">mutate</span><span class="op">(</span>date <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="va">year</span>,tryFormats <span class="op">=</span> <span class="st">"%d/%m/%Y"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="co">#Make plot, a line graph with the union blue colour (#012169)</span></span>
<span><span class="va">line</span> <span class="op">&lt;-</span> <span class="fu">ggplot</span><span class="op">(</span><span class="va">RTB_Sales</span>, <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">date</span>, y <span class="op">=</span> <span class="va">count</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_line</span><span class="op">(</span>colour <span class="op">=</span> <span class="st">"#012169"</span>, linewidth <span class="op">=</span> <span class="fl">1</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="reference/dluhc_style.html">dluhc_style</a></span><span class="op">(</span><span class="op">)</span> </span></code></pre></div>
<p><img src="README_files/figure-gfm/unnamed-chunk-12-1.png"><!-- --></p>
</div>
<div class="section level3">
<h3 id="dluhctheme-function">dluhctheme function<a class="anchor" aria-label="anchor" href="#dluhctheme-function"></a>
</h3>
<p>If you want to create a graph with one line, plotting a variable against time, in a consistent DLUHC style, you can use the <code><a href="reference/one_line_timeseries.html">one_line_timeseries()</a></code> function within the <code>dluhctheme</code> package. This function negates the need for writing any of the ggplot code and instantly takes your data from a dataframe and puts it into a graph.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">RtB_graph</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/one_line_timeseries.html">one_line_timeseries</a></span><span class="op">(</span>.data <span class="op">=</span> <span class="va">RTB_Sales</span>,</span>
<span>                    ycol <span class="op">=</span> <span class="va">count</span>, </span>
<span>                    datecol <span class="op">=</span> <span class="va">year</span>, </span>
<span>                    dateformat <span class="op">=</span> <span class="st">"%d/%m/%Y"</span><span class="op">)</span></span></code></pre></div>
<ul>
<li>
<code>.data</code> is the name of the dataframe you are using. It must contain at least a value column (as a numeric) and a date column (in a format you can define)</li>
<li>
<code>datecol</code> is the name of the column in your dataframe which contains the date variable. You do <em>not</em> need to give this column name in quotations marks</li>
<li>
<code>ycol</code> is the name of the column in your dataframe which contains the numeric variables. If the column is not numeric, the function will return an error message</li>
<li>
<code>dateformat</code> is the format which your date is written in. It has a default of “%Y-%m-%d”, which is a date written in the format of “2021-02-25”. If your date is in the format 25/02/2021, you would write “%d/%m/%Y” for this variable. For more details on date format, see the table at the bottom of this document</li>
</ul>
<p><img src="README_files/figure-gfm/unnamed-chunk-14-1.png"><!-- --></p>
<p>You can further add changes if you don’t like them, such as the placement of the y axis, using the <code>scale_y_continuous</code> function</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">RtB_graph</span> <span class="op">+</span></span>
<span>  <span class="fu">scale_y_continuous</span><span class="op">(</span>limits <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">20000</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="README_files/figure-gfm/unnamed-chunk-15-1.png"><!-- --></p>
</div>
<div class="section level3">
<h3 id="multiple-line-chart">Multiple line chart<a class="anchor" aria-label="anchor" href="#multiple-line-chart"></a>
</h3>
<p>It is suggested that for line graphs with multiple lines, you try to limit the number of lines on a single graph to make reading the data easier. Guidance from ONS suggests no more than 5 lines on a single graph. The below example plots 2 lines on a chart</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#See what the data looks like</span></span>
<span><span class="va">two_line_df</span> <span class="op">&lt;-</span> <span class="va">Social_Housing_Sales</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span>date <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="va">year</span>,tryFormats <span class="op">=</span> <span class="st">"%d/%m/%Y"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#Make plot</span></span>
<span><span class="va">multiple_line</span> <span class="op">&lt;-</span> <span class="fu">ggplot</span><span class="op">(</span><span class="va">two_line_df</span>, <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">date</span>, y <span class="op">=</span> <span class="va">count</span>, colour <span class="op">=</span> <span class="va">type</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_line</span><span class="op">(</span>linewidth <span class="op">=</span> <span class="fl">1</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">scale_colour_manual</span><span class="op">(</span>values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"#012169"</span>, <span class="st">"orange"</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="reference/dluhc_style.html">dluhc_style</a></span><span class="op">(</span><span class="op">)</span> </span></code></pre></div>
<p><img src="README_files/figure-gfm/unnamed-chunk-17-1.png"><!-- --></p>
<p>The <code>scale_color_manual</code> function sets the two colours of the lines. As can be seen in the text it can use both the hex-code (#012169 is the hex code for DLUHC union blue) as well as words (“orange”) which are saved in the function as colours.</p>
<p>The “DLUHC colours” for a multi-line time series are contained within a function in the dluhctheme package: <code>multi_line_timeseries</code></p>
</div>
<div class="section level3">
<h3 id="dluhctheme-function-1">dluhctheme function<a class="anchor" aria-label="anchor" href="#dluhctheme-function-1"></a>
</h3>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/multi_line_timeseries.html">multi_line_timeseries</a></span><span class="op">(</span>.data <span class="op">=</span> <span class="va">Social_Housing_Sales</span>,</span>
<span>                      datecol <span class="op">=</span> <span class="va">year</span>, </span>
<span>                      ycol <span class="op">=</span> <span class="va">count</span>, </span>
<span>                      groupcol <span class="op">=</span> <span class="va">type</span>, </span>
<span>                      dateformat <span class="op">=</span> <span class="st">"%d/%m/%Y"</span><span class="op">)</span></span></code></pre></div>
<p><img src="README_files/figure-gfm/unnamed-chunk-18-1.png"><!-- --></p>
<p>This function works identically to the one_line_timeseries function with the addition of the <code>groupcol</code> variable which is the variable to denote how the data is split.</p>
<p>To use this function, your data must be in the same format as the <code>Social_Housing_Sales</code> dataset, with one column for the date, one for the numeric value and one for the category variable.</p>
<p>This function sets up to five different colours for a line chart. If you want to use more than 5 colours, it is suggested that you break the graphs up into separate facets and use a function like the one below:</p>
</div>
<div class="section level3">
<h3 id="using-facets">Using facets<a class="anchor" aria-label="anchor" href="#using-facets"></a>
</h3>
<p>Faceting is a method used to separate categorical variables and plot on multiple separate graphs. The data contained within the <code>Net_Additions_Regional</code> dataset creates one time series for each of the nine regions in England. Below shows it plotted on one graph:</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">kable</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">Net_Additions_Regional</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">Year</th>
<th align="left">Region</th>
<th align="right">Net_Additions</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">31/03/2001</td>
<td align="left">North East</td>
<td align="right">2890</td>
</tr>
<tr class="even">
<td align="left">31/03/2001</td>
<td align="left">North West</td>
<td align="right">10720</td>
</tr>
<tr class="odd">
<td align="left">31/03/2001</td>
<td align="left">Yorkshire and The Humber</td>
<td align="right">10800</td>
</tr>
<tr class="even">
<td align="left">31/03/2001</td>
<td align="left">East Midlands</td>
<td align="right">14830</td>
</tr>
<tr class="odd">
<td align="left">31/03/2001</td>
<td align="left">West Midlands</td>
<td align="right">13790</td>
</tr>
<tr class="even">
<td align="left">31/03/2001</td>
<td align="left">East of England</td>
<td align="right">17780</td>
</tr>
</tbody>
</table>
<p>To plot on a graph, the date column needs to be cleaned:</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">Cleaned_data</span> <span class="op">&lt;-</span> <span class="fu">mutate</span><span class="op">(</span><span class="va">Net_Additions_Regional</span>, date <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="va">Year</span>,tryFormats <span class="op">=</span> <span class="st">"%d/%m/%Y"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">NetAdd_graph</span> <span class="op">&lt;-</span> <span class="va">Cleaned_data</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">ggplot</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">date</span>, y <span class="op">=</span> <span class="va">Net_Additions</span>, groups <span class="op">=</span> <span class="va">Region</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_line</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>colour <span class="op">=</span> <span class="va">Region</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="reference/dluhc_style.html">dluhc_style</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="va">NetAdd_graph</span></span></code></pre></div>
<p><img src="README_files/figure-gfm/unnamed-chunk-20-1.png"><!-- --></p>
<p>As you can see, the graph above is very messy and difficult to follow each region individually easily. One option is to facet the graphs by region, using the <code>facet_wrap</code> function:</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">NetAdd_graph</span> <span class="op">&lt;-</span> <span class="va">Cleaned_data</span> <span class="op">%&gt;%</span></span>
<span><span class="fu">ggplot</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">date</span>, y <span class="op">=</span> <span class="va">Net_Additions</span>, groups <span class="op">=</span> <span class="va">Region</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span><span class="fu">geom_line</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span><span class="fu">facet_wrap</span><span class="op">(</span><span class="op">~</span><span class="va">Region</span>,scales<span class="op">=</span><span class="st">"fixed"</span><span class="op">)</span> <span class="op">+</span></span>
<span><span class="fu"><a href="reference/dluhc_style.html">dluhc_style</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span></span>
<span><span class="va">NetAdd_graph</span></span></code></pre></div>
<p><img src="README_files/figure-gfm/unnamed-chunk-21-1.png"><!-- --></p>
<p>The <code>dluhc_style</code> function has a size variable which is useful to set to 1 for a faceted time series, as it looks quite busy if the text size is set to the same as it would otherwise be on a normal time series.</p>
<p>The facet_wrap function is made of 2 parts, the first is to separate which variables the graph is going to be used to break the data up by (<code>~Region</code>), and the second (<code>scales=</code>) denotes whether all will be plotted on the same axis scale (<code>scales = “fixed”</code>) or have a free axis (<code>scales = “free”</code>). There are benefits to your graphs for doing either of these: fixed allows you to compare the regions to one another more easily but can hide the changes in some regions which have a low absolute value, while free scales allows you to see the rate of change in each region, but does not show them compared to one another easily.</p>
</div>
<div class="section level3">
<h3 id="dluhctheme-function-2">dluhctheme function<a class="anchor" aria-label="anchor" href="#dluhctheme-function-2"></a>
</h3>
<p>There is also a standard function built into the <code>dluhctheme</code> package which allows you to create a highlighted faceted graph in one step, like the previous functions</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">facet_graph</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/facet_highlight_timeseries.html">facet_highlight_timeseries</a></span><span class="op">(</span>.data <span class="op">=</span> <span class="va">Net_Additions_Regional</span>,</span>
<span>                                          datecol <span class="op">=</span> <span class="va">Year</span>,</span>
<span>                                          ycol <span class="op">=</span> <span class="va">Net_Additions</span>,</span>
<span>                                          groupcol <span class="op">=</span> <span class="va">Region</span>,</span>
<span>                                          dateformat <span class="op">=</span> <span class="st">"%d/%m/%Y"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">facet_graph</span></span></code></pre></div>
<p><img src="README_files/figure-gfm/unnamed-chunk-22-1.png"><!-- --></p>
<p>Again this function can be adapted to have the axis match what you may want from them, for example if you wanted:</p>
<ul>
<li>the axis to go from 0-50000 <code>limits = c(0,50000)</code>
</li>
<li>labels at 0, 25000 and 50000 <code>breaks = c(0,25000,50000)</code>
</li>
<li>labels to have commas in them, using the scales package <code>labels = scales::comma</code>
</li>
<li>y-axis to cross the x-axis at 0 <code>expand = c(0,0)</code>
</li>
</ul>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">facet_graph</span> <span class="op">+</span></span>
<span>  <span class="fu">scale_y_continuous</span><span class="op">(</span>breaks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">25000</span>,<span class="fl">50000</span><span class="op">)</span>,limits <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">50000</span><span class="op">)</span>,labels <span class="op">=</span> <span class="fu">scales</span><span class="fu">::</span><span class="va"><a href="https://scales.r-lib.org/reference/comma.html" class="external-link">comma</a></span>,expand <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">0</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="README_files/figure-gfm/unnamed-chunk-23-1.png"><!-- --></p>
</div>
<div class="section level3">
<h3 id="creating-a-forecast-time-series">Creating a forecast time series<a class="anchor" aria-label="anchor" href="#creating-a-forecast-time-series"></a>
</h3>
<p>Sometimes you may want to present data on a graph of which some of the data is recorded data and some is a prediction or forecast. There are a few different ways to achieve this.</p>
<p>The example dataset for this is the <code>GDP_Deflator</code> data contained in the dluhctheme package</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">kable</span><span class="op">(</span><span class="va">GDP_Deflator</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">year</th>
<th align="right">GDP</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">31/03/2020</td>
<td align="right">94.8652</td>
</tr>
<tr class="even">
<td align="left">31/03/2021</td>
<td align="right">100.2213</td>
</tr>
<tr class="odd">
<td align="left">31/03/2022</td>
<td align="right">100.0000</td>
</tr>
<tr class="even">
<td align="left">31/03/2023</td>
<td align="right">102.4102</td>
</tr>
<tr class="odd">
<td align="left">31/03/2024</td>
<td align="right">104.3092</td>
</tr>
<tr class="even">
<td align="left">31/03/2025</td>
<td align="right">106.3465</td>
</tr>
<tr class="odd">
<td align="left">31/03/2026</td>
<td align="right">108.4740</td>
</tr>
</tbody>
</table>
<p>All the data up to 31/03/2022 is recorded data, and all afterwards is preidiction</p>
<p>The most simple method is to add a dotted line vertically on the graph to denoe where the predictions begin from.</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#As with the previous examples, the date needs cleaning before running. </span></span>
<span><span class="va">Forecast_df</span> <span class="op">&lt;-</span> <span class="va">GDP_Deflator</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span>date <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="va">year</span>,tryFormats <span class="op">=</span> <span class="st">"%d/%m/%Y"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">Forecast_df</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">ggplot</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">date</span>, y<span class="op">=</span><span class="va">GDP</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_line</span><span class="op">(</span>linewidth <span class="op">=</span> <span class="fl">2</span>,colour<span class="op">=</span><span class="st">"blue"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_vline</span><span class="op">(</span>xintercept <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"2022-03-31"</span><span class="op">)</span>,linewidth <span class="op">=</span> <span class="fl">1.5</span>,linetype<span class="op">=</span><span class="st">"dashed"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="reference/dluhc_style.html">dluhc_style</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="README_files/figure-gfm/unnamed-chunk-25-1.png"><!-- --></p>
<p>Another method would be to have the lines go from a solid line to a dashed line. To do this you need to add in a new column as well as duplicated the row which contains the last recorded value.</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">Forecast_df_2</span> <span class="op">&lt;-</span> <span class="va">Forecast_df</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span>type <span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">date</span> <span class="op">&lt;=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"2022-03-31"</span><span class="op">)</span>,<span class="st">"Actual"</span>,<span class="st">"Predicted"</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">add_row</span><span class="op">(</span>year <span class="op">=</span> <span class="st">"31/03/2022"</span>,date <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"2022-03-31"</span><span class="op">)</span>,GDP<span class="op">=</span><span class="fl">100</span>,type <span class="op">=</span> <span class="st">"Predicted"</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">arrange</span><span class="op">(</span><span class="va">date</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">kable</span><span class="op">(</span><span class="va">Forecast_df_2</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">year</th>
<th align="right">GDP</th>
<th align="left">date</th>
<th align="left">type</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">31/03/2020</td>
<td align="right">94.8652</td>
<td align="left">2020-03-31</td>
<td align="left">Actual</td>
</tr>
<tr class="even">
<td align="left">31/03/2021</td>
<td align="right">100.2213</td>
<td align="left">2021-03-31</td>
<td align="left">Actual</td>
</tr>
<tr class="odd">
<td align="left">31/03/2022</td>
<td align="right">100.0000</td>
<td align="left">2022-03-31</td>
<td align="left">Actual</td>
</tr>
<tr class="even">
<td align="left">31/03/2022</td>
<td align="right">100.0000</td>
<td align="left">2022-03-31</td>
<td align="left">Predicted</td>
</tr>
<tr class="odd">
<td align="left">31/03/2023</td>
<td align="right">102.4102</td>
<td align="left">2023-03-31</td>
<td align="left">Predicted</td>
</tr>
<tr class="even">
<td align="left">31/03/2024</td>
<td align="right">104.3092</td>
<td align="left">2024-03-31</td>
<td align="left">Predicted</td>
</tr>
<tr class="odd">
<td align="left">31/03/2025</td>
<td align="right">106.3465</td>
<td align="left">2025-03-31</td>
<td align="left">Predicted</td>
</tr>
<tr class="even">
<td align="left">31/03/2026</td>
<td align="right">108.4740</td>
<td align="left">2026-03-31</td>
<td align="left">Predicted</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">Forecast_df_2</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">ggplot</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">date</span>,y<span class="op">=</span><span class="va">GDP</span>,group<span class="op">=</span><span class="va">type</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_line</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>linetype <span class="op">=</span> <span class="va">type</span><span class="op">)</span>, linewidth <span class="op">=</span> <span class="fl">1.2</span>, colour <span class="op">=</span> <span class="st">"blue"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="reference/dluhc_style.html">dluhc_style</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="README_files/figure-gfm/unnamed-chunk-27-1.png"><!-- --></p>
</div>
<div class="section level3">
<h3 id="dluhctheme-function-3">dluhctheme function<a class="anchor" aria-label="anchor" href="#dluhctheme-function-3"></a>
</h3>
<p>This is quite a long process, so a function has been created which will do this for you: <code><a href="reference/forecast_timeseries.html">forecast_timeseries()</a></code></p>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/forecast_timeseries.html">forecast_timeseries</a></span><span class="op">(</span>.data <span class="op">=</span> <span class="va">GDP_Deflator</span>,</span>
<span>                    datecol <span class="op">=</span> <span class="va">year</span>,</span>
<span>                    ycol <span class="op">=</span> <span class="va">GDP</span>,</span>
<span>                    cutdate <span class="op">=</span> <span class="st">"01/04/2022"</span>,</span>
<span>                    dateformat <span class="op">=</span> <span class="st">"%d/%m/%Y"</span>,</span>
<span>                    dottedline <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                    label_names <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Recorded"</span>,<span class="st">"Forecast"</span><span class="op">)</span> <span class="op">)</span></span></code></pre></div>
<p><img src="README_files/figure-gfm/unnamed-chunk-28-1.png"><!-- --></p>
<ul>
<li>
<code>cutdate</code> is the first day after the last recorded value (1st April 2022 is after 31st March 2022)</li>
<li>
<code>dottedline</code> is a TRUE/FALSE variable, to whether you want a vertical dotted line at the cut date</li>
<li>
<code>label_names</code> are the names given to the two lines</li>
</ul>
</div>
</div>
<div class="section level2">
<h2 id="make-a-bar-chart">Make a bar chart<a class="anchor" aria-label="anchor" href="#make-a-bar-chart"></a>
</h2>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#Prepare data</span></span>
<span><span class="va">bar_df</span> <span class="op">&lt;-</span> <span class="va">gapminder</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">year</span> <span class="op">==</span> <span class="fl">2007</span> <span class="op">&amp;</span> <span class="va">continent</span> <span class="op">==</span> <span class="st">"Africa"</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">arrange</span><span class="op">(</span><span class="fu">desc</span><span class="op">(</span><span class="va">lifeExp</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fl">5</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#Make plot</span></span>
<span><span class="va">bars</span> <span class="op">&lt;-</span> <span class="fu">ggplot</span><span class="op">(</span><span class="va">bar_df</span>, <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">country</span>, y <span class="op">=</span> <span class="va">lifeExp</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_bar</span><span class="op">(</span>stat<span class="op">=</span><span class="st">"identity"</span>, </span>
<span>           position<span class="op">=</span><span class="st">"identity"</span>, </span>
<span>           fill<span class="op">=</span><span class="st">"#1380A1"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_hline</span><span class="op">(</span>yintercept <span class="op">=</span> <span class="fl">0</span>, size <span class="op">=</span> <span class="fl">1</span>, colour<span class="op">=</span><span class="st">"#333333"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="reference/dluhc_style.html">dluhc_style</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">labs</span><span class="op">(</span>title<span class="op">=</span><span class="st">"Reunion is highest"</span>,</span>
<span>       subtitle <span class="op">=</span> <span class="st">"Highest African life expectancy, 2007"</span><span class="op">)</span></span></code></pre></div>
<p><img src="README_files/figure-gfm/unnamed-chunk-30-1.png"><!-- --></p>
<div class="section level3">
<h3 id="stacked-bar-chart">Stacked bar chart<a class="anchor" aria-label="anchor" href="#stacked-bar-chart"></a>
</h3>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#prepare data</span></span>
<span><span class="va">stacked_df</span> <span class="op">&lt;-</span> <span class="va">gapminder</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">year</span> <span class="op">==</span> <span class="fl">2007</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span>lifeExpGrouped <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/cut.html" class="external-link">cut</a></span><span class="op">(</span><span class="va">lifeExp</span>, </span>
<span>                    breaks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">50</span>, <span class="fl">65</span>, <span class="fl">80</span>, <span class="fl">90</span><span class="op">)</span>,</span>
<span>                    labels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Under 50"</span>, <span class="st">"50-65"</span>, <span class="st">"65-80"</span>, <span class="st">"80+"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">group_by</span><span class="op">(</span><span class="va">continent</span>, <span class="va">lifeExpGrouped</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">summarise</span><span class="op">(</span>continentPop <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="va">pop</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#set order of stacks by changing factor levels</span></span>
<span><span class="va">stacked_df</span><span class="op">$</span><span class="va">lifeExpGrouped</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">stacked_df</span><span class="op">$</span><span class="va">lifeExpGrouped</span>, levels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rev.html" class="external-link">rev</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/levels.html" class="external-link">levels</a></span><span class="op">(</span><span class="va">stacked_df</span><span class="op">$</span><span class="va">lifeExpGrouped</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#create plot</span></span>
<span><span class="va">stacked_bars</span> <span class="op">&lt;-</span> <span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">stacked_df</span>, </span>
<span>                       <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">continent</span>,</span>
<span>                           y <span class="op">=</span> <span class="va">continentPop</span>,</span>
<span>                           fill <span class="op">=</span> <span class="va">lifeExpGrouped</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_bar</span><span class="op">(</span>stat <span class="op">=</span> <span class="st">"identity"</span>, </span>
<span>           position <span class="op">=</span> <span class="st">"fill"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="reference/dluhc_style.html">dluhc_style</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">scale_y_continuous</span><span class="op">(</span>labels <span class="op">=</span> <span class="fu">scales</span><span class="fu">::</span><span class="va"><a href="https://scales.r-lib.org/reference/percent_format.html" class="external-link">percent</a></span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">scale_fill_viridis_d</span><span class="op">(</span>direction <span class="op">=</span> <span class="op">-</span><span class="fl">1</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_hline</span><span class="op">(</span>yintercept <span class="op">=</span> <span class="fl">0</span>, size <span class="op">=</span> <span class="fl">1</span>, colour <span class="op">=</span> <span class="st">"#333333"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">labs</span><span class="op">(</span>title <span class="op">=</span> <span class="st">"How life expectancy varies"</span>,</span>
<span>       subtitle <span class="op">=</span> <span class="st">"% of population by life expectancy band, 2007"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">theme</span><span class="op">(</span>legend.position <span class="op">=</span> <span class="st">"top"</span>, </span>
<span>        legend.justification <span class="op">=</span> <span class="st">"left"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">guides</span><span class="op">(</span>fill <span class="op">=</span> <span class="fu">guide_legend</span><span class="op">(</span>reverse <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="README_files/figure-gfm/unnamed-chunk-32-1.png"><!-- --></p>
<p>This example shows proportions, but you might want to make a stacked bar chart showing number values instead - this is easy to change!</p>
<p>The value passed to the <code>position</code> argument will determine if your stacked chart shows proportions or actual values.</p>
<p><code>position = "fill"</code> will draw your stacks as proportions, and <code>position = "identity"</code> will draw number values.</p>
</div>
<div class="section level3">
<h3 id="grouped-bar-chart">Grouped bar chart<a class="anchor" aria-label="anchor" href="#grouped-bar-chart"></a>
</h3>
<p>Making a grouped bar chart is very similar to making a bar chart.</p>
<p>You just need to change <code>position = "identity"</code> to <code>position = "dodge"</code>, and set the <code>fill</code> aesthetically instead:</p>
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#Prepare data</span></span>
<span><span class="va">grouped_bar_df</span> <span class="op">&lt;-</span> <span class="va">gapminder</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">year</span> <span class="op">==</span> <span class="fl">1967</span> <span class="op">|</span> <span class="va">year</span> <span class="op">==</span> <span class="fl">2007</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">select</span><span class="op">(</span><span class="va">country</span>, <span class="va">year</span>, <span class="va">lifeExp</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">spread</span><span class="op">(</span><span class="va">year</span>, <span class="va">lifeExp</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span>gap <span class="op">=</span> <span class="va">`2007`</span> <span class="op">-</span> <span class="va">`1967`</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">arrange</span><span class="op">(</span><span class="fu">desc</span><span class="op">(</span><span class="va">gap</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fl">5</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">gather</span><span class="op">(</span>key <span class="op">=</span> <span class="va">year</span>, </span>
<span>         value <span class="op">=</span> <span class="va">lifeExp</span>,</span>
<span>         <span class="op">-</span><span class="va">country</span>,</span>
<span>         <span class="op">-</span><span class="va">gap</span><span class="op">)</span> </span>
<span>  </span>
<span><span class="co">#Make plot</span></span>
<span><span class="va">grouped_bars</span> <span class="op">&lt;-</span> <span class="fu">ggplot</span><span class="op">(</span><span class="va">grouped_bar_df</span>, </span>
<span>                       <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">country</span>, </span>
<span>                           y <span class="op">=</span> <span class="va">lifeExp</span>, </span>
<span>                           fill <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">as.factor</a></span><span class="op">(</span><span class="va">year</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_bar</span><span class="op">(</span>stat<span class="op">=</span><span class="st">"identity"</span>, position<span class="op">=</span><span class="st">"dodge"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_hline</span><span class="op">(</span>yintercept <span class="op">=</span> <span class="fl">0</span>, size <span class="op">=</span> <span class="fl">1</span>, colour<span class="op">=</span><span class="st">"#333333"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="reference/dluhc_style.html">dluhc_style</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">scale_fill_manual</span><span class="op">(</span>values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"#1380A1"</span>, <span class="st">"#FAAB18"</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">labs</span><span class="op">(</span>title<span class="op">=</span><span class="st">"We're living longer"</span>,</span>
<span>       subtitle <span class="op">=</span> <span class="st">"Biggest life expectancy rise, 1967-2007"</span><span class="op">)</span></span></code></pre></div>
<p><img src="README_files/figure-gfm/unnamed-chunk-34-1.png"><!-- --></p>
</div>
<div class="section level3">
<h3 id="faceted-bar-charts">Faceted bar charts<a class="anchor" aria-label="anchor" href="#faceted-bar-charts"></a>
</h3>
<p>Using the same data from the stacked bar charts, you can see how the data could be displayed different through faceting.</p>
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">facet_df</span> <span class="op">&lt;-</span> <span class="va">stacked_df</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">group_by</span><span class="op">(</span><span class="va">continent</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span>Proportion <span class="op">=</span> <span class="va">continentPop</span><span class="op">/</span><span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">continentPop</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">facet_bars</span> <span class="op">&lt;-</span> <span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">facet_df</span>, </span>
<span>                       <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">continent</span>,</span>
<span>                           y <span class="op">=</span> <span class="va">Proportion</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_bar</span><span class="op">(</span>stat <span class="op">=</span> <span class="st">"identity"</span>, </span>
<span>           position <span class="op">=</span> <span class="st">"identity"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">facet_wrap</span><span class="op">(</span><span class="op">~</span><span class="va">lifeExpGrouped</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="reference/dluhc_style.html">dluhc_style</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fl">1</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">scale_y_continuous</span><span class="op">(</span>labels <span class="op">=</span> <span class="fu">scales</span><span class="fu">::</span><span class="va"><a href="https://scales.r-lib.org/reference/percent_format.html" class="external-link">percent</a></span><span class="op">)</span> </span>
<span></span>
<span><span class="va">facet_bars</span></span></code></pre></div>
<p><img src="README_files/figure-gfm/unnamed-chunk-35-1.png"><!-- --></p>
</div>
</div>
<div class="section level2">
<h2 id="static-la-maps">Static LA Maps<a class="anchor" aria-label="anchor" href="#static-la-maps"></a>
</h2>
<p>The package also allows you to create maps, currently only at LA level, using the LA_map function.</p>
<p>To create the map your data must have a column for the LA codes in the proper ONS format, not that mad loopy format that LPA use!</p>
<p>The example data for this is the number of help to buy sales in each local authority</p>
<div class="sourceCode" id="cb29"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">kable</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">Help_to_Buy</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">LA_Code</th>
<th align="right">Completions</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">E06000022</td>
<td align="right">406490</td>
</tr>
<tr class="even">
<td align="left">E06000055</td>
<td align="right">777743</td>
</tr>
<tr class="odd">
<td align="left">E06000008</td>
<td align="right">178175</td>
</tr>
<tr class="even">
<td align="left">E06000009</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">E06000028</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">E06000058</td>
<td align="right">0</td>
</tr>
</tbody>
</table>
<p>You need to specify a few things for this function:</p>
<ul>
<li>
<code>.data</code> is the name of the dataframe</li>
<li>
<code>LA_col</code> is the column which your LA code is in</li>
<li>
<code>year</code> is the financial year which matches your data, so it will choose the correct map</li>
<li>
<code>map_colours</code> is a two colour vector which has the low and high colour for the scale, as standard this is white and union blue</li>
<li>
<code>save</code> if you set this to true it will save as a png, but you MUST specify the path in the filepath part</li>
<li>
<code>countries</code> are the countries you want displayed E, E+W, GB or UK</li>
</ul>
<div class="sourceCode" id="cb30"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">HtB_map</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/LA_map.html">LA_map</a></span><span class="op">(</span>.data <span class="op">=</span> <span class="va">Help_to_Buy</span></span>
<span>       ,LA_col <span class="op">=</span> <span class="va">LA_Code</span></span>
<span>       ,countries <span class="op">=</span> <span class="st">"E"</span></span>
<span>       ,variable <span class="op">=</span> <span class="va">Completions</span></span>
<span>       ,map_colours <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"#FFFFFF"</span>,<span class="st">"#012169"</span><span class="op">)</span></span>
<span>      ,year <span class="op">=</span> <span class="st">"2021-22"</span></span>
<span>      ,save <span class="op">=</span> <span class="cn">F</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb31"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] "Your original data had 334 rows of data"</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] "On the map, there were 309 matches"</span></span></code></pre></div>
<p><img src="README_files/figure-gfm/unnamed-chunk-38-1.png"><!-- --></p>
</div>
</div>
  </main><aside class="col-md-3"><div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li>Open</li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing dluhctheme</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>RAP Working Group <br><small class="roles"> Maintainer </small>  </li>
</ul>
</div>



  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by RAP Working Group.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
